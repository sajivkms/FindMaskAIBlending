(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{58:function(e,t,a){e.exports=a(69)},63:function(e,t,a){},64:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),c=a.n(l),o=(a(63),a(64),a(117)),i=a(118),s=a(38),u=a(7),d=a(109),m=a(123),b=a(116),f=a(113),g=a(114),h=a(112),p=a(107),E=a(115),v=r.a.forwardRef((function(e,t){return r.a.createElement(p.a,Object.assign({direction:"up",ref:t},e))}));function j(){var e=r.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],l=function(){n(!1)};return r.a.createElement("div",null,r.a.createElement(d.a,{variant:"contained",color:"default",onClick:function(){n(!0)}},"How to use"),r.a.createElement(m.a,{open:a,TransitionComponent:v,keepMounted:!0,onClose:l,"aria-labelledby":"alert-dialog-Grow-title","aria-describedby":"alert-dialog-Grow-description"},r.a.createElement(h.a,{id:"alert-dialog-Grow-title"},"Poisson Blending with Artificial Intelligence"),r.a.createElement(f.a,null,r.a.createElement(g.a,{id:"alert-dialog-Grow-description"},"This website uses AI to identify objects in an image and blend it into another image using Poisson Blending.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,null),r.a.createElement("br",null),"Follow along with the steps. For steps that have a submit button, make sure that you press the submit button, otherwise it will not work.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,null),r.a.createElement("br",null),r.a.createElement("bold",null,"IMPORTANT NOTE: "),"This site will not work on mobile devices properly.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,null),r.a.createElement("br",null),"\xa9 2020 Sajiv Kamalakaran")),r.a.createElement(b.a,null,r.a.createElement(d.a,{onClick:l,color:"primary"},"Thank you!"))))}function O(){return r.a.createElement(o.a,{position:"static"},r.a.createElement(i.a,{style:{flex:"true",justifyContent:"space-between"}},r.a.createElement(s.a,{variant:"h6"},"AI Poisson Blending"),r.a.createElement(j,null)))}var w=a(121),k=a(127),y=a(122),S=a(124),x=a(18),C=a(50),R={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},I={borderColor:"#2196f3"},B={borderColor:"#00e676"},D={borderColor:"#ff1744"},N={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16},P={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,height:100,padding:4,boxSizing:"border-box"},F={display:"flex",minWidth:0,overflow:"hidden"},U={display:"block",width:"auto",height:"100%"};function A(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useCallback)((function(t){c(t.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))),e.onDropFunction(t)})),i=Object(C.a)({accept:"image/*",onDrop:o}),s=i.getRootProps,d=i.getInputProps,m=i.isDragActive,b=i.isDragAccept,f=i.isDragReject,g=l.map((function(e){return r.a.createElement("div",{style:P,key:e.name},r.a.createElement("div",{style:F},r.a.createElement("img",{src:e.preview,style:U})))}));Object(n.useEffect)((function(){return function(){l.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[l]);var h=Object(n.useMemo)((function(){return Object(x.a)({},R,{},m?I:{},{},b?B:{},{},f?D:{})}),[m,f,b]);return r.a.createElement("div",{className:"container"},r.a.createElement("div",s({style:h}),r.a.createElement("input",d()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")),r.a.createElement("aside",{style:N},g))}var L=a(119),T=a(125),M=a(120),W=r.a.createContext({masks:[],setMasks:function(){}}),J=function(e){var t={masks:{classes:[],boundingBoxes:[]},setMasks:function(e){console.log(e),o(Object(x.a)({},c,{masks:e}))}},a=Object(n.useState)(t),l=Object(u.a)(a,2),c=l[0],o=l[1];return r.a.createElement(W.Provider,{value:c},e.children)},G=r.a.createContext({data:{classes:[],boundingBoxes:[]},setdata:function(){}}),Y=function(e){var t={data:{classes:[],boundingBoxes:[],bottomCenter:[0,0]},setdata:function(e){console.log(e),o(Object(x.a)({},c,{data:e}))}},a=Object(n.useState)(t),l=Object(u.a)(a,2),c=l[0],o=l[1];return r.a.createElement(G.Provider,{value:c},e.children)};function _(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),l=r.length,c=new Uint8Array(l);l--;)c[l]=r.charCodeAt(l);return new File([c],t,{type:n})}var H={paddingLeft:"15px",paddingRight:"15px"};function X(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(u.a)(o,2),s=i[0],d=i[1],m=Object(n.useState)(!1),b=Object(u.a)(m,2),f=b[0],g=b[1],h=Object(n.useState)(!1),E=Object(u.a)(h,2),v=E[0],j=E[1],O=Object(n.useContext)(G),w=Object(n.useContext)(W);return r.a.createElement("div",{style:H},s?r.a.createElement(L.a,null):r.a.createElement("div",null,v&&r.a.createElement("div",null,r.a.createElement(M.a,{control:r.a.createElement(T.a,{checked:f,onChange:function(){return g((function(e){return!e}))}}),label:"Show Image (Once recived)"}),r.a.createElement("br",null),r.a.createElement("p",null,O.data.classes.length," objects were found. Click next")),r.a.createElement(p.a,{in:f},r.a.createElement("img",{src:l,alt:"",height:f?"auto":"0px"}))),r.a.createElement("p",null,"Upload the image"),r.a.createElement(A,{onDropFunction:function(e){var t=new FormData,a=new FileReader;a.readAsDataURL(e[0]),a.onloadend=function(){localStorage.setItem("object-image",a.result)},t.append("file",e[0]),d(!0),j(!0),fetch("http://3.21.241.59/predict",{method:"POST",body:t}).then((function(e){return e.blob()})).then((function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;localStorage.setItem("objects-detected",e),c(e)},d(!1)})),fetch("http://3.21.241.59/get_masks",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){O.setdata({classes:e.predicted_classes,boundingBoxes:e.bounding_boxes,bottomCenter:[0,0]}),w.setMasks(e.masks)}))}}))}var z=a(126),K=r.a.createContext({data:{classes:[],boundingBoxes:[]},setdata:function(){}}),$=function(e){var t={data:{mask:[],boundingBox:[],bottomCenter:[0,0],predClass:""},setdata:function(e){console.log(e),o(Object(x.a)({},c,{data:e}))}},a=Object(n.useState)(t),l=Object(u.a)(a,2),c=l[0],o=l[1];return r.a.createElement(K.Provider,{value:c},e.children)};var q=function(e){var t=Object(n.useState)([0,0]),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!0),i=Object(u.a)(o,2),s=i[0],m=i[1],b=Object(n.useState)(!1),f=Object(u.a)(b,2),g=f[0],h=f[1],p=localStorage.getItem("objects-detected"),E=Object(n.useContext)(G),v=Object(n.useContext)(W),j=Object(n.useContext)(K),O=Object(n.createRef)(),w=Object(n.createRef)();return Object(n.useEffect)((function(){O.current.width=w.current.width,O.current.height=w.current.height/(w.current.width/600),O.current.getContext("2d").drawImage(w.current,0,0)}),[]),r.a.createElement("div",null,r.a.createElement("p",null,"Select Location and press submit."),r.a.createElement("canvas",{width:600,ref:O,onClick:function(e){s&&c(function(e,t){if(s){var a=e.getBoundingClientRect(),n=t.clientX-a.left,r=t.clientY-a.top;m(!1);var l=e.getContext("2d");return l.beginPath(),l.arc(n,r,5,0,2*Math.PI,!1),l.fillStyle="red",l.fill(),l.lineWidth=1,l.strokeStyle="darkred",l.stroke(),[n,r]}return[-1,-1]}(O.current,e))},style:{cursor:"crosshair"}}),r.a.createElement("img",{ref:w,width:"600px",src:p,alt:"",style:{cursor:"crosshair",display:"none"}}),r.a.createElement("br",null),r.a.createElement(z.a,{title:"...or if you need to select a different object"},r.a.createElement(d.a,{variant:"outlined",color:"secondary",style:{marginRight:"10px"},onClick:function(){m(!0);var e=O.current,t=O.current.getContext("2d");p=localStorage.getItem("objects-detected"),t.clearRect(0,0,e.width,e.height),t.drawImage(w.current,0,0)}},"Reload (if image doesn't show)")),r.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("coordinates",JSON.stringify(l));var e=function(e,t){for(var a=0;a<t.length;a++)if(1===t[a][e[1]][e[0]])return a;return-1}(l,v.masks);j.setdata({predClass:E.data.classes[e],boundingBox:E.data.boundingBoxes[e],bottomCenter:l,mask:v.masks[e]}),h(!0)},disabled:g||s},g?"Submitted (click next)":"Submit Object"))},Q={paddingLeft:"15px",paddingRight:"15px"};function V(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.createRef)();return r.a.createElement("div",{style:Q},l?r.a.createElement(L.a,null):r.a.createElement("div",null),r.a.createElement("p",null,"Upload your background and the click next"),r.a.createElement(A,{onDropFunction:function(e){c(!0);var t=new FileReader;e.length>0&&t.readAsDataURL(e[0]),t.onloadend=function(){var e=t.result;localStorage.setItem("background",e),c(!1)}},hello:"world"}),r.a.createElement("canvas",{ref:o,style:{display:"none"}}))}function Z(e){var t=Object(n.useState)([0,0]),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!0),i=Object(u.a)(o,2),s=i[0],m=i[1],b=Object(n.useState)(!1),f=Object(u.a)(b,2),g=f[0],h=f[1],p=Object(n.useState)(!1),E=Object(u.a)(p,2),v=E[0],j=E[1],O=localStorage.getItem("background"),w=Object(n.useContext)(K),k=Object(n.createRef)(),y=Object(n.createRef)();Object(n.useEffect)((function(){y.current.onload=function(){k.current.width=600;var e=y.current.width;k.current.height=y.current.height/(e/600),y.current.width=600,k.current.getContext("2d").drawImage(y.current,0,0,600,y.current.height/(e/600))}}),[]);return r.a.createElement("div",null,v?r.a.createElement(L.a,null):r.a.createElement("div",null," "),r.a.createElement("p",null,"Select Location on the image and press submit."),r.a.createElement("canvas",{ref:k,onClick:function(e){s&&c(function(e,t){if(s){var a=e.getBoundingClientRect(),n=t.clientX-a.left,r=t.clientY-a.top;m(!1);var l=e.getContext("2d");return l.beginPath(),l.arc(n,r,5,0,2*Math.PI,!1),l.fillStyle="red",l.fill(),l.lineWidth=1,l.strokeStyle="darkred",l.stroke(),[n,r]}return[-1,-1]}(k.current,e))},style:{cursor:"crosshair"}}),r.a.createElement("img",{ref:y,src:O,alt:"",style:{cursor:"crosshair",display:"none"}}),r.a.createElement("br",null),r.a.createElement(z.a,{title:"...or if you need to select a different location"},r.a.createElement(d.a,{disabled:g,variant:"outlined",color:"secondary",style:{marginRight:"10px"},onClick:function(){m(!0);var e=k.current,t=k.current.getContext("2d");t.clearRect(0,0,e.width,e.height),t.drawImage(y.current,0,0,e.width,e.height)}},"Reload (if image doesn't show)")),r.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("coordinates-background",JSON.stringify(l)),h(!0),j(!0),function(){var e=new FormData;e.append("background",_(localStorage.getItem("background"))),e.append("objectImage",_(localStorage.getItem("object-image"))),e.append("bottomCenter",JSON.stringify(l)),e.append("mask",JSON.stringify(w.data.mask)),fetch("http://3.21.241.59/blend",{method:"POST",body:e}).then((function(e){return e.blob()})).then((function(e){console.log("Helo"),j(!1);var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;localStorage.setItem("finalBlend",e)}}))}()},disabled:g||s},g?"Submitted (click next)":"Submit Object"))}function ee(e){var t=localStorage.getItem("finalBlend");return console.log(t),r.a.createElement("div",null,r.a.createElement("p",null,'To download the image, right-click and press "Save Image as" or "Download" or whatever your browser provides.'),r.a.createElement("img",{width:"600px",src:t}))}var te=Object(w.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})),ae={paddingLeft:"15px",paddingRight:"15px"};function ne(){var e=te(),t=r.a.useState(0),a=Object(u.a)(t,2),n=a[0],l=a[1],c=r.a.useState(new Set),o=Object(u.a)(c,2),i=o[0],m=o[1],b=r.a.useState(!1),f=Object(u.a)(b,2),g=f[0],h=(f[1],["Upload Image","Select Object","Upload Background Image","Select location","Finished!"]),p=function(e){return 9===e},E=function(e){return i.has(e)};return r.a.createElement("div",{className:e.root},r.a.createElement(k.a,{activeStep:n},h.map((function(e,t){var a={},n={};return p(t)&&(n.optional=r.a.createElement(s.a,{variant:"caption"},"Optional")),E(t)&&(a.completed=!1),r.a.createElement(y.a,Object.assign({key:e},a),r.a.createElement(S.a,n,e))}))),r.a.createElement("div",null,n===h.length?r.a.createElement("div",{style:ae},r.a.createElement(s.a,{className:e.instructions},"All steps completed - you're finished"),r.a.createElement(d.a,{onClick:function(){l(0)},className:e.button},"Blend New image")):r.a.createElement("div",null,r.a.createElement(s.a,{className:e.instructions},function(e){switch(e){case 0:return r.a.createElement("div",null,r.a.createElement(X,null));case 1:return r.a.createElement("div",{style:ae},r.a.createElement(q,null));case 2:return r.a.createElement("div",{style:ae},r.a.createElement(V,null));case 3:return r.a.createElement("div",{style:ae},r.a.createElement(Z,null));case 4:return r.a.createElement("div",{style:ae},r.a.createElement(ee,null));default:return"Unknown step"}}(n)),r.a.createElement("div",{style:ae},r.a.createElement(d.a,{disabled:0===n,onClick:function(){l((function(e){return e-1}))},className:e.button},"Back"),p(n)&&r.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){if(!p(n))throw new Error("You can't skip a step that isn't optional.");l((function(e){return e+1})),m((function(e){var t=new Set(e.values());return t.add(n),t}))},className:e.button},"Skip"),r.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){var e=i;E(n)&&(e=new Set(e.values())).delete(n),l((function(e){return e+1})),m(e)},className:e.button,disabled:g},n===h.length-1?"Finish":"Next")))))}var re=function(){return r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(Y,null,r.a.createElement(J,null,r.a.createElement($,null,r.a.createElement(ne,null)))),r.a.createElement("br",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.c704212b.chunk.js.map